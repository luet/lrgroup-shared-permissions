#! /bin/bash
# Usage:
# cp-lrgroup [cp options] SRC DEST

DEST="${*: -1:1}"
SRC="${*: -2:1}"
N_PARAM=$((${#*}-2))
CP_PARAM="${*: 1:$N_PARAM}"

echo DEST: $DEST
echo SRC: $SRC
echo number of parameters: $N_PARAM
echo CP_PARAM: $CP_PARAM

# copy
echo command executed:
echo cp ${*}
cp ${*}

# change permissions
if [ -d $DEST/$SRC ]
then
    chmod -R g=rX $DEST/$SRC
    # set the permissions so that group members can create
    # new files in the directory but not delete or overwrite
    # existing files
    find $DEST/$SRC -type d -exec chmod g+w {} \;
else
    chmod g=rX $DEST/$SRC
fi
